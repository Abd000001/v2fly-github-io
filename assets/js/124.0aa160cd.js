(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{324:function(t,e,o){"use strict";o.r(e);var v=o(0),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"policy-本地策略"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#policy-本地策略"}},[t._v("#")]),t._v(" Policy 本地策略")]),t._v(" "),o("p",[t._v("本地策略可以配置信息统计、内部缓存大小和一些用户相关的权限。V2Ray 处理的每一个连接都对应一个用户，按照用户的等级（level）应用不同的策略。本地策略可根据等级的不同而变化。")]),t._v(" "),o("p",[t._v("service.policy")]),t._v(" "),o("h2",{attrs:{id:"policy"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#policy"}},[t._v("#")]),t._v(" Policy")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("system")]),t._v(": "),o("a",{attrs:{href:"#SystemPolicyObject"}},[t._v("SystemPolicyObject")])])]),t._v(" "),o("p",[t._v("V2Ray 全局系统策略。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("level")]),t._v(": map{string: "),o("a",{attrs:{href:"#PolicyObject"}},[t._v("PolicyObject")]),t._v("}")])]),t._v(" "),o("p",[t._v('一组键值对，每个键是一个字符串形式的数字（JSON 的要求），比如 "0"、"1" 等，双引号不能省略，此数字对应用户等级。每一个值是一个 '),o("a",{attrs:{href:"#PolicyObject"}},[t._v("PolicyObject")]),t._v("。")]),t._v(" "),o("h3",{attrs:{id:"systempolicyobject"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#systempolicyobject"}},[t._v("#")]),t._v(" SystemPolicyObject")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("stats")]),t._v(": "),o("a",{attrs:{href:"#StatsObject"}},[t._v("StatsObject")])])]),t._v(" "),o("p",[t._v("统计信息设置。")]),t._v(" "),o("h3",{attrs:{id:"statsobject"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#statsobject"}},[t._v("#")]),t._v(" StatsObject")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("inboundUplink")]),t._v(": bool")])]),t._v(" "),o("p",[t._v("当值为 "),o("code",[t._v("true")]),t._v(" 时，开启所有入站代理的上行流量统计。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("inboundDownlink")]),t._v(": bool")])]),t._v(" "),o("p",[t._v("当值为 "),o("code",[t._v("true")]),t._v(" 时，开启所有入站代理的下行流量统计。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("outboundUplink")]),t._v(": bool")])]),t._v(" "),o("p",[t._v("当值为 "),o("code",[t._v("true")]),t._v(" 时，开启所有出站代理的上行流量统计。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("outboundDownlink")]),t._v(": bool")])]),t._v(" "),o("p",[t._v("当值为 "),o("code",[t._v("true")]),t._v(" 时，开启所有出站代理的下行流量统计。")]),t._v(" "),o("h3",{attrs:{id:"policyobject"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#policyobject"}},[t._v("#")]),t._v(" PolicyObject")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("timeout")]),t._v(": "),o("a",{attrs:{href:"#TimeoutPolicyObject"}},[t._v("TimeoutPolicyObject")])])]),t._v(" "),o("p",[t._v("超时策略。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("stats")]),t._v(": "),o("a",{attrs:{href:"#PolicyStatsObject"}},[t._v("PolicyStatsObject")])])]),t._v(" "),o("p",[t._v("统计信息策略。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("buffer")]),t._v(": "),o("a",{attrs:{href:"#BufferPolicyObject"}},[t._v("BufferPolicyObject")])])]),t._v(" "),o("p",[t._v("内部缓存策略。")]),t._v(" "),o("h3",{attrs:{id:"timeoutpolicyobject"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#timeoutpolicyobject"}},[t._v("#")]),t._v(" TimeoutPolicyObject")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("handshake")]),t._v(": number")])]),t._v(" "),o("p",[t._v("连接建立时的握手时间限制。单位为秒。默认值为 "),o("code",[t._v("4")]),t._v("。在入站代理处理一个新连接时，在握手阶段（比如 VMess 读取头部数据，判断目标服务器地址），如果使用的时间超过这个时间，则中断该连接。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("connectionIdle")]),t._v(": number")])]),t._v(" "),o("p",[t._v("连接空闲的时间限制。单位为秒。默认值为 "),o("code",[t._v("300")]),t._v("。在入站出站代理处理一个连接时，如果在 "),o("code",[t._v("connIdle")]),t._v(" 时间内，没有任何数据被传输（包括上行和下行数据），则中断该连接。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("uplinkOnly")]),t._v(": number")])]),t._v(" "),o("p",[t._v("当连接下行线路关闭后的时间限制。单位为秒。默认值为 "),o("code",[t._v("2")]),t._v("。当服务器（如远端网站）关闭下行连接时，出站代理会在等待 "),o("code",[t._v("uplinkOnly")]),t._v(" 时间后中断连接。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("downlinkOnly")]),t._v(": number")])]),t._v(" "),o("p",[t._v("当连接上行线路关闭后的时间限制。单位为秒。默认值为 "),o("code",[t._v("5")]),t._v("。当客户端（如浏览器）关闭上行连接时，入站代理会在等待 "),o("code",[t._v("downlinkOnly")]),t._v(" 时间后中断连接。")]),t._v(" "),o("h3",{attrs:{id:"policystatsobject"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#policystatsobject"}},[t._v("#")]),t._v(" PolicyStatsObject")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("userUplink")]),t._v(": bool")])]),t._v(" "),o("p",[t._v("当值为 "),o("code",[t._v("true")]),t._v(" 时，开启当前等级的所有用户的上行流量统计。")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("userDownlink")]),t._v(": bool")])]),t._v(" "),o("p",[t._v("当值为 "),o("code",[t._v("true")]),t._v(" 时，开启当前等级的所有用户的下行流量统计。")]),t._v(" "),o("h3",{attrs:{id:"bufferpolicyobject"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#bufferpolicyobject"}},[t._v("#")]),t._v(" BufferPolicyObject")]),t._v(" "),o("blockquote",[o("p",[o("code",[t._v("connection")]),t._v(": number")])]),t._v(" "),o("p",[t._v("每个连接的内部缓存大小，单位为 Bytes。 当值为 "),o("code",[t._v("-1")]),t._v(" 时，缓存大小无限。")])])}),[],!1,null,null,null);e.default=_.exports}}]);